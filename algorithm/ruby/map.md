# mapメソッド
配列の要素の数だけブロック内で処理を繰り返して、新しい配列を返す。
```
mapメソッドの基本構文-->
配列.map { |変数| 実行する処理 }
# 実行する処理が複数行に渡る場合
配列.map do |変数|
  実行する処理
end
```
```
irb | mapメソッドの使用例
irb(main):001:0> numbers = [10, 20, 30, 40]
=> [10, 20, 30, 40]
irb(main):002:0> new_numbers= numbers.map { |n| n * 2 }
=> [20, 40, 60, 80]
irb(main):003:0> new_numbers
=> [20, 40, 60, 80]
```
- mapメソッドは、配列だけではなくHashに対しても使用する事が出来ます。返り値は、配列になる。

## mapメソッドの基本的な使い方

例えば、配列の要素を２倍にした新しい配列を作る場合は、下記の通り。
```
irb | 配列の要素を２倍にした新しい配列を作成する
irb(main):001:0> numbers = [10, 20, 30, 40]
=> [10, 20, 30, 40]
irb(main):002:0> new_numbers= numbers.map { |n| n * 2 }
=> [20, 40, 60, 80]
irb(main):003:0> new_numbers
=> [20, 40, 60, 80]
```
>処理の流れ

>まず、配列の最初の要素である10がブロック{}に渡されて変数nに代入される
>n*2(10*2)の結果が新しい配列に代入される
>この流れが配列の要素分ループ処理される
>新しい配列は、new_numbers変数に代入される

### eachメソッドをmapメソッドに置き換えて比較してみよう！
配列を扱うメソッドに使用頻度が高いeachメソッドがあるが、場合によってはmapメソッドで置き換えることが出来る。
先ほどのmapメソッドのコードをeachメソッドに置き換えると、下記の通り。
```
irb | mapメソッドをeachメソッドに置き換える
irb(main):004:0> numbers = [10, 20, 30, 40]
=> [10, 20, 30, 40]
irb(main):005:0> new_numbers = []
=> []
irb(main):006:0> numbers.each { |n| new_numbers << n*2 }
=> [10, 20, 30, 40]
irb(main):007:0>new_numbers
=> [20, 40, 60, 80]
```
eachメソッドを使うと、空配列new_numbersを用意して、ブロック内の処理結果を配列に入れなければならないので、コード量が少し増えてしまう。
さらに、ブロック内で、new_numbersに対して、<< n*2の処理も書いているので、冗長な書き方になっています。

これを踏まえた上でもう一度mapメソッドのコードを確認すると
mapメソッドを使用するとブロック内では処理の本質のみが書かれているので非常に分かりやすい。
```
irb | 配列の要素を２倍にした新しい配列を作成する
irb(main):001:0> numbers = [10, 20, 30, 40]
=> [10, 20, 30, 40]
irb(main):002:0> new_numbers= numbers.map { |n| n * 2 }
=> [20, 40, 60, 80]
irb(main):003:0> new_numbers
=> [20, 40, 60, 80]
```
- 空の配列を用意して、他の配列を順番にループ処理をした結果を空の配列に入れる処理は、mapメソッドに置き換えることが出来る。
- このmapメソッドと同じ働きをするメソッドにcollectメソッドがある。

参考　https://pikawaka.com/ruby/map#%E3%83%87%E3%83%BC%E3%82%BF%E3%83%99%E3%83%BC%E3%82%B9%E3%81%8B%E3%82%89%E7%89%B9%E5%AE%9A%E3%81%AE%E5%80%A4%E3%81%A0%E3%81%91%E9%85%8D%E5%88%97%E3%81%AB%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95
