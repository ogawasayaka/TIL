## XML Path Language(XPath)とは？

- XPath (XML Path Language)とは、ツリー構造となっているXML/HTMLドキュメントからの要素や属性値などを指定するための簡潔な構文(言語)
- Webページは通常HTMLで記述されるから、XPathはWebページの情報を取得する時によく利用する。

### タグ（要素）で指定する

下記はHTMLでよく見かけるタグのまとめ

| タグ | 説明 |  
---- | ----  
|a	| リンクを設定する |
|p  |  	段落を表す|
|div| 	特定の範囲をグループ化する|
|li|   	リストの項目を表す|
|img|	  画像を表示する|
|table|表を作る|
|tr|表の行を表す|
|td|表の列を表す|

- XPathの最も一般的な書き方は、スラッシュ “/” で区切りながらタグを記述する。


### 属性で指定する
- 属性とはタグの中に記載されていて、タグの情報を細かく表す。  
- タグに属性をつけることで、要素の効果を指定したり、具体的な指示を付け加えることが出来る　　
- 属性は通常、「id=”booksTitle”」のように表示され、属性は複数指定する事も可能。
```
<タグ名 属性名=”属性値”>
最も一般的な属性には、href、title、style、src、id、classなどがあります。
XPathでは属性を『@』関数で表します。

例えば、『Harry Potter』を取得したい場合、XPathは次のように書きます。

//h1[@id=”booksTitle”]


抽象化にすると、属性で書くXPath構文はこうなります。

//タグ名[@属性名=”属性値”]
もし同じ属性を持つすべての要素を取得する場合、次のように書きます。

//*[@属性名=”属性値”]
```
### テキストで指定する

下記のようにタグで囲まれているのはテキストです。

<タグ名>ここにテキストが入ります… </タグ名>
Webページからデータを取得するのは、通常ページ内のコンテンツまたはテキストを取得することです。ですから、取得したいテキストを直接指定することができます。

XPathではテキストを『text()』の関数で表します。

例えば、『Harry Potter』を取得したい場合、テキストで指定すると、次のように書きます。

//h1[text()="Harry Potter"]


抽象化にすると、属性で書くXPath構文はこうなります。

//タグ名[text()=”取得するテキスト”]
もし同じテキストを持つすべての要素を取得する場合、次のように書きます。

//*[text()=”取得するテキスト”]


### タグ関係で指定する
HTMLのツリー構造において、すべての要素が親子／兄弟関係を持っています。

1つまたは複数の要素を含む要素は親要素と呼ばれ、含まれる要素は子要素です。子要素は1つのみの親があり、親の開始タグと終了タグの間にあります。同じ親を持つ要素は兄弟要素と呼ばれます。


参考　https://www.octoparse.jp/blog/xpath-introduction
